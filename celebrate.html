<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>üéâ Celebration for Grace ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="assets/love.png">

<script>
    if(sessionStorage.getItem("unlocked")!=="true"){
      window.location.href="index.html";
    }
</script>

<style>
body {
  margin:0;
  height:100vh;
  font-family:"Comic Sans MS",cursive;
  text-align:center;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
}

/* Video background */
#bgVideo {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-3;
}

/* Dark overlay */
#overlay {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.6);
  z-index:-2;
}

/* Container */
.container {
  background: rgba(255,255,255,0.7);
  padding:30px;
  border-radius:25px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
  max-width:550px;
  width:90%;
  position:relative;
  z-index:2;
}

/* Slideshow */
.slideshow {
  margin:15px auto;
  width:200px;
  height:150px;
  overflow:hidden;
  border-radius:15px;
}
.slideshow img {
  width:100%;
  height:100%;
  object-fit:cover;
  display:none;
}
.slideshow img.active {
  display:block;
}

/* Volume & music */
.volume-control {
  margin-top:15px;
  display:flex;
  gap:8px;
  justify-content:center;
  color:#ff3366;
  font-size:.8rem;
}
.volume-control input { width:150px; }
input[type=range]{
  -webkit-appearance:none;
  appearance:none;
  height:6px;
  background:#ffd1dc;
  border-radius:10px;
}
input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:18px;
  height:18px;
  border-radius:50%;
  background:#ff3366;
  cursor:pointer;
  box-shadow:0 0 5px rgba(0,0,0,.3);
}
input[type=range]::-moz-range-thumb{ width:18px; height:18px; border-radius:50%; background:#ff3366; cursor:pointer; }

.song { font-size:.7rem; color:#ff3366; margin-top:5px; }
.sender { color:#ff3366; font-weight:bold; margin-top:10px; }

canvas { position:absolute; top:0; left:0; z-index:1; pointer-events:none; } /* confetti canvas */

</style>
</head>
<body>

<!-- Video background -->
<video autoplay muted loop id="bgVideo">
  <source src="assets/videos/romantic-video.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>
<div id="overlay"></div>

<audio id="music" loop></audio>

<div class="container">
  <div class="slideshow" id="slideshow"></div>

  <h1>Hurray! üíñ</h1>
  <h2>She said YES! üéâ</h2>

  <div class="sender">love, George ‚ù§Ô∏è</div>
  <p style="font-size:0.8rem;">Tap anywhere to start music üéµ</p>
  <div class="song" id="songName"></div>
  <div class="volume-control">üîä <input type="range" id="volume" min="0" max="1" step="0.01"></div>
</div>

<canvas id="confettiCanvas"></canvas>

<script>
/* MUSIC */
const songs=[1,2,3].map(i=>`assets/songs/love-song${i}.mp3`);
const audio=document.getElementById("music");
const randomIndex=Math.floor(Math.random()*songs.length);
audio.src=songs[randomIndex];
document.getElementById("songName").textContent="üéµ "+audio.src.split("/").pop();

const volSlider=document.getElementById("volume");
let savedVol=localStorage.getItem("vol")||0.7;
audio.volume=savedVol;
volSlider.value=savedVol;

document.body.addEventListener("click",()=>audio.play(),{once:true});
volSlider.oninput=()=>{
  audio.volume=volSlider.value;
  localStorage.setItem("vol",volSlider.value);
  audio.play();
};

/* SLIDESHOW */
const imageList=[];
for(let i=1;i<=29;i++) imageList.push(`assets/images/her${i}.jpeg`);
const slideshow=document.getElementById("slideshow");
let currentSlide=0;
imageList.forEach((src,i)=>{
  const img=document.createElement("img");
  img.src=src;
  if(i===0) img.classList.add("active");
  slideshow.appendChild(img);
});
const slides=slideshow.querySelectorAll("img");
setInterval(()=>{
  slides[currentSlide].classList.remove("active");
  currentSlide=(currentSlide+1)%slides.length;
  slides[currentSlide].classList.add("active");
},2000);

/* CONFETTI */
const canvas = document.getElementById("confettiCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let confettiParticles = [];
for(let i=0; i<150; i++){
  confettiParticles.push({
    x: Math.random()*canvas.width,
    y: Math.random()*canvas.height,
    dx: (Math.random()-0.5)*6,
    dy: Math.random()*5+2,
    color: `hsl(${Math.random()*360},100%,50%)`,
    size: Math.random()*6+4
  });
}

function drawConfetti(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  confettiParticles.forEach(p=>{
    ctx.fillStyle=p.color;
    ctx.fillRect(p.x,p.y,p.size,p.size);
    p.x += p.dx;
    p.y += p.dy;
    if(p.y>canvas.height) p.y=-10;
  });
  requestAnimationFrame(drawConfetti);
}
drawConfetti();

/* Make canvas responsive */
window.addEventListener("resize",()=>{
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>

</body>
</html>
