<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Valentine Countdown ‚ù§Ô∏è</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/png" href="assets/love.png">

<style>
body {
  margin:0;
  height:100vh;
  font-family:"Comic Sans MS",cursive;
  text-align:center;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
  background:#000;
}

/* Video background */
#bgVideo {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:-3;
}

/* Dark overlay */
#overlay {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: rgba(0,0,0,0.6);
  z-index:-2;
}

/* Hearts canvas */
#heartsCanvas {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  pointer-events:none;
  z-index:-1;
}

/* White container */
.container {
  background: rgba(255,255,255,0.65);
  padding:25px;
  border-radius:25px;
  box-shadow:0 10px 30px rgba(0,0,0,0.3);
  width:90%;
  max-width:450px;
  position:relative;
  z-index:2;
}

/* Slideshow */
.slideshow {
  margin:0 auto 15px auto;
  width:100%;
  max-width:260px;
  height:180px;
  overflow:hidden;
  border-radius:15px;
}
.slideshow img { width:100%; height:100%; object-fit:cover; display:none; }
.slideshow img.active { display:block; }

/* Countdown */
.countdown {
  display:flex;
  justify-content:center;
  align-items:flex-start;
  margin-top:20px;
  gap:8px;
}

.flip-unit {
  perspective:1000px;
  width:70px;
  height:110px;
  position:relative;
}

.flip-unit span {
  display:block;
  width:100%;
  height:110px;
  font-size:3.2rem;
  font-weight:bold;
  color:#ff3366;
  background: linear-gradient(to bottom, #ccc 0%, #fff 100%);
  border-radius:8px;
  line-height:110px;
  position:absolute;
  left:0;
  top:0;
  text-align:center;
  backface-visibility:hidden;
  border-bottom:4px solid #888;
}

.flip { animation: flip 0.6s forwards; transform-origin: bottom; }

@keyframes flip {
  0% { transform: rotateX(0deg); }
  50% { transform: rotateX(-180deg); }
  100% { transform: rotateX(-180deg); }
}

.separator {
  width:2px;
  height:110px;
  background:#ff3366;
  border-radius:2px;
  box-shadow:0 0 10px #ff3366;
}

.flip-label { font-size:0.9rem; color:#ff3366; }

/* Love text neon */
#loveText {
  margin-bottom:12px;
  min-height:32px;
  font-size:1.1rem;
  color:#ff2d55;
  text-shadow:
    0 0 5px #ff2d55,
    0 0 10px #ff2d55,
    0 0 20px #ff5c8a;
  transition: opacity 1s ease;
}

/* Volume */
.volume-control {
  margin-top:15px;
  display:flex;
  justify-content:center;
  gap:8px;
  color:#ff3366;
}
input[type=range]{
  width:130px;
  height:6px;
  background:linear-gradient(to right,#ff2d55,#ff9acb);
  border-radius:10px;
  -webkit-appearance:none;
}
input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:16px;
  height:16px;
  border-radius:50%;
  background:#ff2d55;
  box-shadow:0 0 10px #ff2d55;
  cursor:pointer;
}
input[type=range]::-moz-range-thumb{
  width:16px;
  height:16px;
  border-radius:50%;
  background:#ff2d55;
  box-shadow:0 0 10px #ff2d55;
}

/* Mobile */
@media(max-width:480px){
  .flip-unit{ width:55px; height:90px; }
  .flip-unit span{ height:90px; line-height:90px; font-size:2.6rem; }
  .separator{ height:90px; }
}
</style>
</head>
<body>

<video autoplay muted loop id="bgVideo">
  <source src="assets/videos/romantic-video.mp4" type="video/mp4">
</video>

<div id="overlay"></div>
<canvas id="heartsCanvas"></canvas>
<audio id="music" loop></audio>
<audio id="popSound" src="assets/sounds/pop.mp3"></audio>

<div class="container">

  <!-- MOVED ABOVE SLIDESHOW -->
  <div id="loveText"></div>

  <div class="slideshow" id="slideshow"></div>
  <h1>Countdown to Our Valentine ‚ù§Ô∏è</h1>
  <p>Something special is waiting for you, Grace üíï</p>

  <div class="countdown">
    <div><div class="flip-unit"><span id="daysTop">00</span></div><div class="flip-label">Days</div></div>
    <div class="separator"></div>
    <div><div class="flip-unit"><span id="hoursTop">00</span></div><div class="flip-label">Hours</div></div>
    <div class="separator"></div>
    <div><div class="flip-unit"><span id="minutesTop">00</span></div><div class="flip-label">Minutes</div></div>
    <div class="separator"></div>
    <div><div class="flip-unit"><span id="secondsTop">00</span></div><div class="flip-label">Seconds</div></div>
  </div>

  <div class="sender">love, George ‚ù§Ô∏è</div>
  <p style="font-size:0.8rem;">Tap anywhere to start music üéµ</p>
  <div class="song" id="songName"></div>
  <div class="volume-control">üîä <input type="range" id="volume" min="0" max="1" step="0.01"></div>
</div>

<script>
/* LOVE TEXT */
const loveTexts=[
 "I love you more every second ‚ù§Ô∏è","You are my forever üíï","My heart chose you üíñ","You are my miracle ‚ú®",
"You make life sweeter üòò","I adore your soul üíû","You are my happy place üòä","My world is you üåç",
"I choose you daily üíç","You are my sunshine ‚òÄÔ∏è","I love your laugh üòç","You are my blessing üôè",
"You complete me üíó","You are my dream come true üåô","I‚Äôm grateful for you every day üíì",
"You are my calm and my fire üî•","You are my heart‚Äôs home üè°","I fall for you daily üíò",
"My love for you grows üå±","You are my favorite thought üí≠",
"I treasure you üíé","You are my joy üé∂","You are my heartbeat üíì","You are my star ‚≠ê",
"I‚Äôm lucky to love you üçÄ","You are my angel üòá","You are my muse üé®","You are my peace ‚òÅÔ∏è",
"You are my adventure üåç","You are my destiny üîÆ",
"You are my queen üëë","You are my sunrise üåÖ","You are my wish ‚≠ê","You are my prayer üôè",
"You are my treasure üí∞","You are my light üí°","You are my universe üåé",
"You are my soulmate üíû","You are my rose üåπ","You are my fairytale üìñ",
"You are my forever and always ‚ôæÔ∏è","You are my love story üìú",
"You are my warm hug ü§ó","You are my magic ‚ú®","You are my home üè°","You are my sweet chaos üå™Ô∏è",
"You are my destiny üíò","You are my reason üíñ","You are my miracle every day ‚ú®",
"You are my endless love ‚ôæÔ∏è","You are my heartbeat‚Äôs song üé∂",
"You are my greatest gift üéÄ","You are my today and tomorrow üí´",
"You are my favorite hello üëã","You are my hardest goodbye üíî",
"You are my perfect moment üï∞Ô∏è","You are my heartbeat‚Äôs wish üíì",
"You are my promise üíû","You are my dream ‚ù§Ô∏è","You are my star in every sky üåå",
"You are my lucky charm üçÄ","You are my safe place üè°","You are my favorite smile üòä",
"You are my sweetest thought üí≠","You are my love always ‚ù§Ô∏è"
];
const fonts=["Comic Sans MS","cursive","serif","monospace","Georgia","Trebuchet MS"];
const loveEl=document.getElementById("loveText");
const pop=document.getElementById("popSound");
let index=0;

function typeText(text){
  loveEl.textContent="";
  let i=0;
  const typer=setInterval(()=>{
    loveEl.textContent+=text.charAt(i);
    i++;
    if(i>=text.length) clearInterval(typer);
  },45);
}

// Show first message immediately
loveEl.style.opacity=1;
loveEl.style.fontFamily=fonts[Math.floor(Math.random()*fonts.length)];
typeText(loveTexts[index]);

function updateLove(){
  index=(index+1)%loveTexts.length;
  loveEl.style.opacity=0;
  setTimeout(()=>{
    loveEl.style.fontFamily=fonts[Math.floor(Math.random()*fonts.length)];
    typeText(loveTexts[index]);
    loveEl.style.opacity=1;
    pop.currentTime=0; pop.play();
  },300); // small delay for smooth fade
}

setInterval(updateLove,5000); // every 5 seconds


/* MUSIC */
const songs=[1,2,3].map(i=>`assets/songs/love-song${i}.mp3`);
const audio=document.getElementById("music");
audio.src=songs[Math.floor(Math.random()*songs.length)];
document.getElementById("songName").textContent="üéµ "+audio.src.split("/").pop();
const vol=document.getElementById("volume");
audio.volume=0.7; vol.value=0.7;
document.body.addEventListener("click",()=>audio.play(),{once:true});
vol.oninput=()=>audio.volume=vol.value;

/* SLIDESHOW */
const imageList=[];
for(let i=1;i<=29;i++) imageList.push(`assets/images/her${i}.jpeg`);
const slideshow=document.getElementById("slideshow");
let slide=0;
imageList.forEach((src,i)=>{
  const img=document.createElement("img");
  img.src=src;
  if(i===0) img.classList.add("active");
  slideshow.appendChild(img);
});
const slides=slideshow.querySelectorAll("img");
setInterval(()=>{
  slides[slide].classList.remove("active");
  slide=(slide+1)%slides.length;
  slides[slide].classList.add("active");
},2000);

/* DIAMOND CONFETTI */
const canvas=document.getElementById("heartsCanvas");
canvas.width=innerWidth; canvas.height=innerHeight;
const ctx=canvas.getContext("2d");
let hearts=[];
setInterval(()=>hearts.push({
  x:Math.random()*canvas.width,
  y:canvas.height,
  size:Math.random()*4+3,
  speed:Math.random()*1.5+0.5,
  color:`hsl(${Math.random()*360},100%,70%)`
}),200);

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  hearts.forEach((h,i)=>{
    ctx.fillStyle=h.color;
    ctx.save();
    ctx.translate(h.x,h.y);
    ctx.rotate(Math.PI/4);
    ctx.fillRect(-h.size/2,-h.size/2,h.size,h.size);
    ctx.restore();
    h.y-=h.speed;
    if(h.y<0) hearts.splice(i,1);
  });
  requestAnimationFrame(draw);
}
draw();

/* COUNTDOWN */
const valentineDate=new Date(`Feb 14 ${new Date().getFullYear()} 00:00:00`).getTime();
function pad(n){return n.toString().padStart(2,"0");}
function flip(el,val){
  const v=pad(val);
  if(el.textContent!=v){
    el.textContent=v;
    el.classList.add("flip");
    setTimeout(()=>el.classList.remove("flip"),600);
  }
}
setInterval(()=>{
  const d=valentineDate-Date.now();
  if(d<=0){
  sessionStorage.setItem("unlocked", "true"); // Mark that we've visited the countdown page
 setTimeout(() => {
  location.href="main.html";
 }, 5000);
  }
  flip(daysTop,Math.floor(d/86400000));
  flip(hoursTop,Math.floor(d%86400000/3600000));
  flip(minutesTop,Math.floor(d%3600000/60000));
  flip(secondsTop,Math.floor(d%60000/1000));
},1000);
</script>
</body>
</html>
